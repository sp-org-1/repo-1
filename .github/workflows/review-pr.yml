# Simple workflow to demonstrate using AWS CodeBuild runner from GitHub Action
name: Review-PR

on:
  pull_request:
    branches:
      - 'master'
      - 'develop'
      - 'releases/**'
  workflow_dispatch:

jobs:
  #build:
  #  permissions:
  #    id-token: write
  #    contents: read
  #    pull-requests: write
  #  runs-on:
  #    - codebuild-github-runner-01-${{ github.run_id }}-${{ github.run_attempt }}
  #  steps:
  #    - uses: actions/checkout@v4
  #    - name: Run a one-line script
  #      run: echo Hello, world!
  #    - name: Run a multi-line script
  #      run: |
  #        echo Add other actions to build,
  #        echo test, and deploy your project.
      #- name: Configure AWS credentials
      #  uses: aws-actions/configure-aws-credentials@v4
      #  with:
      #    aws-region: us-east-1
      #    role-to-assume: arn:aws:iam::291912718832:role/service-role/AmazonBedrockExecutionRoleForAgents_LS8YP3KXWPP
      #- name: Run custom steps
      #  run: |
      #    pwd
      #    id
      #    ls -al
      #    python --version
      #    /root/.local/bin/yamllint yamls
          #sleep 30
  invoke-agent:
    runs-on: ubuntu-latest
    #runs-on: 
      #- codebuild-github-runner-01-${{ github.run_id }}-${{ github.run_attempt }}
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 2
      - id: foo
        uses: sp-org-1/invoke-aws-bedrock-agent@6a0c6c282ba3a520cb51ce416b298d24863b6764
      - run: echo random-number "$RANDOM_NUMBER"
        shell: bash
        env:
          RANDOM_NUMBER: ${{ steps.foo.outputs.random-number }}
