# Simple workflow to demonstrate using AWS CodeBuild runner from GitHub Action
name: Test-Workflow-Windows

on:
  workflow_dispatch:
env:
  host: localhost
jobs:
  build:
    strategy:
      matrix:
        host: ['host1', 'host2', 'localhost']
    runs-on: windows-latest 
    steps:
      - uses: actions/checkout@v4
      - name: Get runner context
        env:
          RUNNER_CONTEXT: ${{ toJSON(runner) }}
        run: echo "$RUNNER_CONTEXT"
      #- name: Get github context
      #  env:
      #    GITHUB_CONTEXT: ${{ toJSON(github) }}
      #  run: echo "$GITHUB_CONTEXT"
      #  shell: pwsh
      #- name: Get github context
      #  env:
      #    GITHUB_CONTEXT: ${{ toJSON(github) }}
      #  run: curl --help
      #  shell: pwsh
      #- name: Run a one-line script
      #  run: echo Hello, world!
      #- name: Run a multi-line script
      #  run: |
      #    echo Add other actions to build,
      #    echo test, and deploy your project.
      #  shell: cmd
      - name: Run1
        env:
          cmd_part: ${{ matrix.host == 'localhost' && '' || format('-ComputerName {0}', matrix.host) }}
        run: |
          echo ${{ env.cmd_part }}
          Invoke-Command ${{ env.cmd_part }} -ScriptBlock {
            (Get-Host).Version
          }
        continue-on-error: true
